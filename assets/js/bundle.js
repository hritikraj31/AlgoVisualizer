(function(){function d(o,h,a){function l(s,t){if(!h[s]){if(!o[s]){var e="function"==typeof require&&require;if(!t&&e)return e(s,!0);if(r)return r(s,!0);var i=new Error("Cannot find module '"+s+"'");throw i.code="MODULE_NOT_FOUND",i}var n=h[s]={exports:{}};o[s][0].call(n.exports,function(t){var e=o[s][1][t];return l(e||t)},n,n.exports,d,o,h,a)}return h[s].exports}for(var r="function"==typeof require&&require,t=0;t<a.length;t++)l(a[t]);return l}return d})()({1:[function(t,e,s){const i=t=>{let s=t.nodesToAnimate;let i=t.speed;function n(e){setTimeout(()=>{if(e===s.length){t.nodesToAnimate=[];if(t.shortestPath)o(t);else t.busy=false}else{let t=document.getElementById(s[e].id);if(t.className!=="start"&&t.className!=="end")t.className=s[e].type;n(e+1)}},i)}n(0)};function o(t){let s=t.shortestPath;let i=t.speed;function n(e){setTimeout(()=>{if(e===s.length){t.busy=false;s=[];t.shortestPath=[]}else{let t=document.getElementById(s[e].id);if(t.className!=="start"&&t.className!=="end")t.className="path";n(e+1)}},i)}n(0)}const n=t=>{let e=t.nodesToAnimate;e.forEach(t=>{if(t.type==="start"||t.type==="end"){document.getElementById(t.id).className=t.type}else{document.getElementById(t.id).className=`instant-${t.type}`}});t.shortestPath.forEach(t=>{if(t.type!=="start"&&t.type!=="end"){document.getElementById(t.id).className=`instant-path`}});t.nodesToAnimate=[];t.shortestPath=[]};e.exports={startAnimation:i,instantAnimate:n}},{}],2:[function(t,e,s){const h=t("./node");const i=t("./grid_graph_algo/dijkstra");const{startAnimation:n,instantAnimate:o}=t("./animation.js");const a=t("./grid_graph_algo/a_star");function l(t,e){this.height=t;this.width=e;this.grid=[];this.nodes={};this.busy=false;this.start=null;this.end=null;this.pressedNodetype=null;this.previousNode=null;this.mouseDown=false;this.nodesToAnimate=[];this.shortestPath=[];this.algorithmDone=false;this.specialTypes=["start","end"];this.lastAlgo=null;this.speed=10}l.prototype.createGrid=function(){let t="";for(let o=0;o<this.height;o++){let i=[];let n=`<tr id="${o}">`;for(let s=0;s<this.width;s++){let t=`${o}-${s}`;let e=new h(t);n+=`<td id="${t}" class = "instant-unvisited"></td>`;i.push(e);this.nodes[`${t}`]=e}n+="</tr>";t+=n;this.grid.push(i)}document.getElementById("grid").innerHTML=t};l.prototype.addEventListeners=function(){for(let n=0;n<this.height;n++){for(let i=0;i<this.width;i++){let t=`${n}-${i}`;let e=this.nodes[t];let s=document.getElementById(t);s.onmousedown=t=>{t.preventDefault();if(this.busy){return}this.mouseDown=true;if(e.type==="start"||e.type==="end"){this.previousNode=e;this.pressedNodetype=e.type}else{this.pressedNodetype="unvisited";this.changeNormalNode(e)}};s.onmouseenter=t=>{t.preventDefault();if(this.busy){return}if(this.mouseDown){if(this.pressedNodetype==="start"||this.pressedNodetype==="end"){if(e.type==="start"||e.type==="end"){return}this.changeSpecialNode(e);if(this.pressedNodetype==="start"){e.type="start"}else if(this.pressedNodetype==="end"){e.type="end"}}else{this.changeNormalNode(e)}}};s.onmouseup=t=>{t.preventDefault();this.mouseDown=false;if(this.pressedNodetype==="start"){this.start=e}else if(this.pressedNodetype==="end"){this.end=e}this.pressedNodetype="unvisited"}}}document.getElementById("dijkstra").onclick=()=>{if(this.busy)return;this.run(i)};document.getElementById("aStar").onclick=()=>{if(this.busy)return;this.run(a)};document.getElementById("clearPath_btn").onclick=()=>{if(this.busy)return;this.clearPath()};document.getElementById("clearBoard_btn").onclick=()=>{if(this.busy)return;this.clearBoard()};document.getElementById("maze-1").onclick=()=>{this.createMaze(this.recursiveDivisionMaze)};document.getElementById("maze-2").onclick=()=>{this.createMaze(this.createPrimsMaze)};document.getElementById("sp-fast").onclick=()=>{this.speed=10};document.getElementById("sp-med").onclick=()=>{this.speed=20};document.getElementById("sp-slow").onclick=()=>{this.speed=30}};l.prototype.setStart=function(t){if(typeof t==="string"){t=this.nodes[t]}if(this.start){this.start.type="unvisited";document.getElementById(this.start.id).className="unvisited"}this.nodes[t.id].type="start";this.start=t;document.getElementById(t.id).className="start"};l.prototype.setEnd=function(t){if(typeof t==="string"){t=this.nodes[t]}if(this.end){this.end.type="unvisited";document.getElementById(this.end.id).className="unvisited"}this.nodes[t.id].type="end";this.end=t;document.getElementById(t.id).className="end"};l.prototype.changeNormalNode=function(t){let e=document.getElementById(t.id);if(this.mouseDown&&(t.type!=="start"&&t.type!=="end")){t.lastNodeType=t.type;t.type=t.type==="wall"?"unvisited":"wall";e.className=t.type==="unvisited"?"instant-unvisited":"wall"}};l.prototype.changeSpecialNode=function(s){if(this.previousNode&&this.previousNode.id!==s.id){let t=document.getElementById(s.id);let e=document.getElementById(this.previousNode.id);t.className=e.className;s.lastNodeType=s.type;s.type=this.previousNode.type;e.className=`instant-${this.previousNode.lastNodeType}`;this.previousNode.type=this.previousNode.lastNodeType;this.previousNode=s;if(this.pressedNodetype==="start"){this.start=s}else if(this.pressedNodetype==="end"){this.end=s}if(!this.algorithmDone){return}this.clearPath();this.lastAlgo(this);this.formShortestPath();o(this)}};l.prototype.createMaze=function(t){if(this.busy){return}this.busy=true;this.clearWalls();this.clearPath();this.nodesToAnimate=[];t.apply(this,[0,this.width-1,0,this.height-1]);n(this)};function d(t,e){return Math.floor(Math.random()*(Math.abs(t-e)+1)+Math.min(t,e))}l.prototype.recursiveDivisionMaze=function(o,h,a,l){let r=["start","end"];if(Math.abs(a-l)<4||Math.abs(h-o)<4){return}if(Math.abs(h-this.width+1)<1e-9&&Math.abs(l-this.height+1)<1e-9&&Math.abs(o+a)<1e-9){for(let s=0;s<=l;s++){let t=this.nodes[`${s}-${h}`];let e=document.getElementById(t.id);if(!r.includes(e.className)){this.nodes[t.id].type="wall";this.nodesToAnimate.push(t)}t=this.nodes[`${s}-${0}`];e=document.getElementById(t.id);if(!r.includes(e.className)){this.nodes[t.id].type="wall";this.nodesToAnimate.push(t)}}for(let s=0;s<=h;s++){let t=this.nodes[`${0}-${s}`];let e=document.getElementById(t.id);if(!r.includes(e.className)){this.nodes[t.id].type="wall";this.nodesToAnimate.push(t)}t=this.nodes[`${l}-${s}`];e=document.getElementById(t.id);if(!r.includes(e.className)){this.nodes[t.id].type="wall";this.nodesToAnimate.push(t)}}}if(Math.abs(a-l)<Math.abs(o-h)){let t=Math.abs(o-h);t=Math.floor((t+1)/2);let i=2*d(1,t-1)+o;let e=Math.abs(a-l);e=Math.floor(e/2);let n=2*d(0,e-1)+1+a;for(let s=a+1;s<l;s++){if(s!=n){let t=this.nodes[`${s}-${i}`];let e=document.getElementById(t.id);if(!r.includes(e.className)){this.nodes[t.id].type="wall";this.nodesToAnimate.push(t)}}}this.recursiveDivisionMaze(o,i,a,l);this.recursiveDivisionMaze(i,h,a,l)}else{let t=Math.abs(a-l);t=Math.floor((t+1)/2);let i=2*d(1,t-1)+a;let e=Math.abs(o-h);e=Math.floor(e/2);let n=2*d(0,e-1)+1+o;for(let s=o+1;s<h;s++){if(s!=n){let t=this.nodes[`${i}-${s}`];let e=document.getElementById(t.id);if(!r.includes(e.className)){this.nodes[t.id].type="wall";this.nodesToAnimate.push(t)}}}this.recursiveDivisionMaze(o,h,a,i);this.recursiveDivisionMaze(o,h,i,l)}};l.prototype.createPrimsMaze=function(){Object.keys(this.nodes).forEach(t=>{if(this.specialTypes.includes(this.nodes[t].type))return;this.nodes[t].type="wall";document.getElementById(t).className="wall"});let n=[];n.push(this.nodes[`${2*d(0,(this.height-1)/2-1)}-${2*d(0,(this.width-1)/2-1)}`]);let o=[...this.getNeighbours(n[0],2)];this.setStart(n[0]);function h(t,e){let[s,i]=t.id.split("-").map(t=>parseInt(t));let[n,o]=e.id.split("-").map(t=>parseInt(t));let h=this.nodes[`${(s+n)/2}-${(i+o)/2}`];if(this.specialTypes.includes(h.type))return;h.type="unvisited";this.nodesToAnimate.push(h)}while(o.length!==0){let t=d(0,o.length-1);let e=o[t];if(this.specialTypes.includes(e.type))continue;let s=this.getNeighbours(e,2).filter(t=>n.indexOf(t)!==-1);let i;i=s[d(0,s.length-1)];h.bind(this)(i,e);e.type="unvisited";this.nodesToAnimate.push(e);n.push(e);o.splice(t,1);o.push(...this.getNeighbours(e,2).filter(t=>o.indexOf(t)===-1&&n.indexOf(t)===-1&&!this.specialTypes.includes(t.type)))}};l.prototype.getNeighbours=function(t,o=1){let h=[];let[a,l]=t.id.split("-").map(t=>parseInt(t));for(let n=0;n<2;n++){for(let i=0;i<2;i++){let t=a+(n-i)*o;let e=l+(i+n-1)*o;let s=this.nodes[`${t}-${e}`];if(s){h.push(s)}}}return h};l.prototype.clearBoard=function(){this.clearPath();this.clearWalls();this.setStart("10-18");this.setEnd("10-35")};l.prototype.clearPath=function(){this.algorithmDone=false;let i=Object.keys(this.nodes);for(let s=0;s<i.length;s++){let t=this.nodes[i[s]];let e=document.getElementById(t.id);if(t.type!=="start"&&t.type!=="wall"&&t.type!=="instant-wall"&&t.type!=="end"){t.type="unvisited";e.className="instant-unvisited"}t.distance=Infinity;t.previousNode=null}};l.prototype.clearWalls=function(){Object.keys(this.nodes).forEach(t=>{let e=document.getElementById(t);if(this.nodes[t].type==="wall"||this.nodes[t].type==="instant-wall"){this.nodes[t].type="unvisited";e.className="instant-unvisited"}})};l.prototype.run=function(t){if(!this.busy){this.clearPath();this.busy=true;this.lastAlgo=t;t(this);this.formShortestPath();n(this)}};l.prototype.init=function(){this.createGrid();this.setStart("10-18");this.setEnd("10-35");this.addEventListeners()};l.prototype.formShortestPath=function(){this.shortestPath=[];let t=this.nodes[this.end.id];while(t&&t!==this.start){this.shortestPath.push(t);t=t.previousNode}if(!t){this.shortestPath=[]}else this.shortestPath.reverse()};e.exports=l},{"./animation.js":1,"./grid_graph_algo/a_star":3,"./grid_graph_algo/dijkstra":4,"./node":5}],3:[function(t,e,s){const d=t("../../utils/heap");function i(e){let{nodes:s,start:t,end:i}=e;let n=new Map;let o=new Map;n[2]=3;Object.keys(s).forEach(t=>(n[t]=Infinity,o[t]=Infinity));n[t.id]=0;o[t.id]=p(t.id,i.id);function h(t,e){return o[t.id]>o[e.id]}let a=new d([],h);a.push(t);let l;let r=new Map;while(!a.empty()){l=a.top();if(l===i){e.algorithmDone=true;break}e.nodesToAnimate.push(l);if(l.type!=="start"){l.type="visited"}a.pop();let t=u(l,s);t=t.filter(t=>!r[t.id]&&t.type!=="wall");t.forEach(t=>{let e=n[l.id]+1;if(e<n[t.id]){t.previousNode=l;n[t.id]=e;o[t.id]=n[t.id]+p(t.id,i.id);a.push(t);r[t.id]=true}})}e.algorithmDone=true}function p(t,e){let[s,i]=t.split("-").map(t=>parseInt(t));let[n,o]=e.split("-").map(t=>parseInt(t));return Math.abs(s-n)+Math.abs(i-o)}function u(t,o){let h=[];let[a,l]=t.id.split("-").map(t=>parseInt(t));for(let n=0;n<2;n++){for(let i=0;i<2;i++){let t=a+(n-i);let e=l+(i+n-1);let s=o[`${t}-${e}`];if(s&&s.type!=="wall"){h.push(s)}}}return h}e.exports=i},{"../../utils/heap":6}],4:[function(t,e,s){const i=e=>{let{start:t,end:s,nodes:i}=e;if(!t||!s||t===s){return false}i[t.id].distance=0;let n=Object.keys(i);while(n.length){let t=o(i,n);while(t.type=="wall"&&n.length){t=o(i,n)}if(t.distance===Infinity){e.algorithmDone=true;return}e.nodesToAnimate.push(t);if(t.type==="end"){e.algorithmDone=true;break}if(t.type!=="start")t.type="visited";h(i,t)}};function o(e,s){let i,n;for(let t=0;t<s.length;t++){if(!i||i.distance>e[s[t]].distance){i=e[s[t]];n=t}}s.splice(n,1);return i}function h(t,i){let n=a(i,t);for(let s in n){let t=n[s];let e=l(i,t);if(t.distance>e+i.distance){t.distance=e+i.distance;t.previousNode=i}}}function a(t,o){let h=[];let[a,l]=t.id.split("-").map(t=>parseInt(t));for(let n=0;n<2;n++){for(let i=0;i<2;i++){let t=a+(n-i);let e=l+(i+n-1);let s=o[`${t}-${e}`];if(s&&s.type!=="wall"){h.push(s)}}}return h}function l(t,e){let[s,i]=t.id.split("-").map(t=>parseInt(t));let[n,o]=e.id.split("-").map(t=>parseInt(t));return Math.abs(n-s)+Math.abs(o-i)}e.exports=i},{}],5:[function(t,e,s){function i(t,e="unvisited"){this.id=t;this.previousNode=null;this.distance=Infinity;this.type=e;this.lastNodeType="unvisited"}e.exports=i},{}],6:[function(t,e,s){function i(t,e){this.heap=[];if(t&&t instanceof Array){this.heap=t}this.size=this.heap.length;if(typeof e!=="function"){throw new Error("Comperator given for heap is not a function")}this.comperator=e;this.build()}i.prototype.bubbleDown=function(s){while(s<this.size){let t=this.heap[s];let e=s;if(2*e+1<this.size&&this.comperator(t,this.heap[2*e+1])){e=2*e+1;t=this.heap[e]}if(2*e+2<this.size&&this.comperator(t,this.heap[2*e+2])){e=2*e+2;t=this.heap[e]}t=this.heap[e];this.heap[e]=this.heap[s];this.heap[s]=t;if(Math.abs(e-s)<1e-9){break}s=e}};i.prototype.bubbleUp=function(s){while(s>0){let t=this.heap[s];let e=s;if(!this.comperator(t,this.heap[Math.floor((s-1)/2)])){e=Math.floor((s-1)/2);t=this.heap[e]}t=this.heap[e];this.heap[e]=this.heap[s];this.heap[s]=t;if(Math.abs(e-s)<1e-9){break}s=e}};i.prototype.pop=function(){if(this.size===0){return null}let t=this.heap[this.size-1];this.heap[this.size-1]=this.heap[0];this.heap[0]=t;this.size--;this.bubbleDown(0);return this.heap.pop()};i.prototype.top=function(){if(this.size==0){return null}return this.heap[0]};i.prototype.build=function(){if(this.heap&&this.heap instanceof Array)for(let t=Math.floor((this.size-2)/2);t>=0;t--){this.bubbleDown(t)}};i.prototype.push=function(t){this.heap.push(t);this.bubbleUp(this.size);this.size=this.size+1};i.prototype.empty=function(){return this.heap.length===0};e.exports=i},{}],7:[function(t,e,s){const i=t("../../algorithms/graph/node.js");const n=t("../../algorithms/graph/board.js");document.addEventListener("DOMContentLoaded",()=>{let t=new n(23,59);t.init()})},{"../../algorithms/graph/board.js":2,"../../algorithms/graph/node.js":5}]},{},[7]);
